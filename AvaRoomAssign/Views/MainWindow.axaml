<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:AvaRoomAssign.ViewModels"
        xmlns:models="using:AvaRoomAssign.Models"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="950"
        x:Class="AvaRoomAssign.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/house.ico"
        Title="æŠ¢æˆ¿å¥½å¥½å¥½ - Avaloniaç‰ˆ Ver 1.0.6 By: hp"
        Width="950" Height="950"
        WindowStartupLocation="CenterScreen"
        CanResize="true">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Resources>
        <models:BoolToInverseBoolConverter x:Key="BoolToInverseConverter"/>
        <models:IntToBoolConverter x:Key="IntToBoolConverter"/>
        
        <!-- ä¸»é¢˜èµ„æº - æ›´åŠ ç”ŸåŠ¨çš„é…è‰² -->
        <SolidColorBrush x:Key="ThemeBackground" Color="#F8F9FA"/>
        <SolidColorBrush x:Key="ThemeCardBackground" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="ThemeTextPrimary" Color="#212529"/>
        <SolidColorBrush x:Key="ThemeTextSecondary" Color="#6C757D"/>
        <SolidColorBrush x:Key="ThemeBorder" Color="#DEE2E6"/>
        <SolidColorBrush x:Key="ThemeAccent" Color="#0D6EFD"/>
        <SolidColorBrush x:Key="ThemeAccentHover" Color="#0B5ED7"/>
        <SolidColorBrush x:Key="ThemeSuccess" Color="#198754"/>
        <SolidColorBrush x:Key="ThemeWarning" Color="#FFC107"/>
        <SolidColorBrush x:Key="ThemeDanger" Color="#DC3545"/>
        <SolidColorBrush x:Key="ThemeLogBackground" Color="#F8F9FA"/>
        <SolidColorBrush x:Key="ThemeLogText" Color="#198754"/>
        <!-- è¡¨æ ¼ç›¸å…³é¢œè‰² -->
        <SolidColorBrush x:Key="ThemeTableAlternating" Color="#F8F9FA"/>
        <SolidColorBrush x:Key="ThemeTableHover" Color="#E3F2FD"/>
        <SolidColorBrush x:Key="ThemeTableSelected" Color="#BBDEFB"/>
        
        <!-- æ·±è‰²ä¸»é¢˜èµ„æº - æ›´åŠ ç”ŸåŠ¨çš„é…è‰² -->
        <SolidColorBrush x:Key="DarkThemeBackground" Color="#0D1117"/>
        <SolidColorBrush x:Key="DarkThemeCardBackground" Color="#161B22"/>
        <SolidColorBrush x:Key="DarkThemeTextPrimary" Color="#F0F6FC"/>
        <SolidColorBrush x:Key="DarkThemeTextSecondary" Color="#8B949E"/>
        <SolidColorBrush x:Key="DarkThemeBorder" Color="#30363D"/>
        <SolidColorBrush x:Key="DarkThemeAccent" Color="#58A6FF"/>
        <SolidColorBrush x:Key="DarkThemeAccentHover" Color="#79C0FF"/>
        <SolidColorBrush x:Key="DarkThemeSuccess" Color="#3FB950"/>
        <SolidColorBrush x:Key="DarkThemeWarning" Color="#D29922"/>
        <SolidColorBrush x:Key="DarkThemeDanger" Color="#F85149"/>
        <SolidColorBrush x:Key="DarkThemeLogBackground" Color="#0D1117"/>
        <SolidColorBrush x:Key="DarkThemeLogText" Color="#7EE787"/>
        <!-- æ·±è‰²ä¸»é¢˜è¡¨æ ¼ç›¸å…³é¢œè‰² -->
        <SolidColorBrush x:Key="DarkThemeTableAlternating" Color="#21262D"/>
        <SolidColorBrush x:Key="DarkThemeTableHover" Color="#30363D"/>
        <SolidColorBrush x:Key="DarkThemeTableSelected" Color="#1F6FEB"/>
    </Window.Resources>

    <Window.Styles>
        <!-- å¡ç‰‡æ ·å¼ -->
        <Style Selector="Border.modern-card">
            <Setter Property="Background" Value="{DynamicResource ThemeCardBackground}"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#10000000" OffsetX="0" OffsetY="4" BlurRadius="20"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- å¯æŠ˜å å¡ç‰‡æ ·å¼ -->
        <Style Selector="Border.collapsible-card">
            <Setter Property="Background" Value="{DynamicResource ThemeCardBackground}"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#08000000" OffsetX="0" OffsetY="2" BlurRadius="12"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- æŠ˜å é¢æ¿å¤´éƒ¨æ ·å¼ -->
        <Style Selector="Button.collapse-header">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextPrimary}"/>
            <Setter Property="CornerRadius" Value="16,16,0,0"/>
            <Setter Property="Padding" Value="24,20"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
        </Style>

        <Style Selector="Button.collapse-header:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource ThemeTableHover}"/>
        </Style>

        <Style Selector="Button.collapse-header:pressed /template/ ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource ThemeTableSelected}"/>
        </Style>

        <!-- ä¸»è¦æŒ‰é’®æ ·å¼ - æ›´ç‚«é…·çš„æ¸å˜è‰²æ•ˆæžœ -->
        <Style Selector="Button.modern-primary">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="#667EEA" Offset="0"/>
                        <GradientStop Color="#764BA2" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20,14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#40667EEA" OffsetX="0" OffsetY="4" BlurRadius="12"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Button.modern-primary:pointerover /template/ ContentPresenter">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="#5A6FD8" Offset="0"/>
                        <GradientStop Color="#6A4C93" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#60667EEA" OffsetX="0" OffsetY="6" BlurRadius="16"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Button.modern-primary:pressed /template/ ContentPresenter">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="#4A5BC6" Offset="0"/>
                        <GradientStop Color="#5A3E81" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#80667EEA" OffsetX="0" OffsetY="2" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Button.modern-primary:disabled /template/ ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextSecondary}"/>
        </Style>

        <!-- æ¬¡è¦æŒ‰é’®æ ·å¼ -->
        <Style Selector="Button.modern-secondary">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeAccent}"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20,14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeAccent}"/>
        </Style>

        <Style Selector="Button.modern-secondary:pointerover">
            <Setter Property="Background" Value="{DynamicResource ThemeAccent}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#400D6EFD" OffsetX="0" OffsetY="2" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- å±é™©æŒ‰é’®æ ·å¼ -->
        <Style Selector="Button.modern-danger">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                        <GradientStop Color="#FF6B6B" Offset="0"/>
                        <GradientStop Color="#EE5A52" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#40FF6B6B" OffsetX="0" OffsetY="2" BlurRadius="6"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Button.modern-danger:pointerover /template/ ContentPresenter">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                        <GradientStop Color="#FF5252" Offset="0"/>
                        <GradientStop Color="#E53E3E" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Button.modern-danger:pointerover">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#60FF6B6B" OffsetX="0" OffsetY="4" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Button.modern-danger:pressed">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#80FF6B6B" OffsetX="0" OffsetY="1" BlurRadius="4"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
        <Style Selector="Button.theme-toggle">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextSecondary}"/>
            <Setter Property="CornerRadius" Value="22"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="Width" Value="48"/>
            <Setter Property="Height" Value="48"/>
        </Style>

        <Style Selector="Button.theme-toggle:pointerover">
            <Setter Property="Background" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#20000000" OffsetX="0" OffsetY="2" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- è¾“å…¥æ¡†æ ·å¼ -->
        <Style Selector="TextBox.modern">
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Background" Value="{DynamicResource ThemeCardBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextPrimary}"/>
        </Style>

        <Style Selector="TextBox.modern:focus">
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeAccent}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#400D6EFD" OffsetX="0" OffsetY="0" BlurRadius="12"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ComboBoxæ ·å¼ -->
        <Style Selector="ComboBox.modern">
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Background" Value="{DynamicResource ThemeCardBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextPrimary}"/>
        </Style>

        <!-- æ ‡ç­¾æ ·å¼ -->
        <Style Selector="TextBlock.modern-label">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextPrimary}"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <!-- æ ‡é¢˜æ ·å¼ -->
        <Style Selector="TextBlock.modern-title">
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="28"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextPrimary}"/>
        </Style>

        <!-- å‰¯æ ‡é¢˜æ ·å¼ -->
        <Style Selector="TextBlock.modern-subtitle">
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextSecondary}"/>
        </Style>

        <!-- æ—¥å¿—æ–‡æœ¬æ¡†æ ·å¼ -->
        <Style Selector="TextBox.modern-log">
            <Setter Property="Background" Value="{DynamicResource ThemeLogBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeLogText}"/>
            <Setter Property="FontFamily" Value="Consolas, 'SF Mono', 'Monaco', 'Menlo', monospace"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeSuccess}"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#20198754" OffsetX="0" OffsetY="0" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataGridæ ·å¼ - çŽ°ä»£åŒ–è®¾è®¡ -->
        <Style Selector="DataGrid.modern">
            <Setter Property="Background" Value="{DynamicResource ThemeCardBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextPrimary}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="RowBackground" Value="Transparent"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="GridLinesVisibility" Value="None"/>
            <Setter Property="CanUserReorderColumns" Value="False"/>
            <Setter Property="CanUserSortColumns" Value="True"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <!-- DataGrid Headeræ ·å¼ -->
        <Style Selector="DataGrid.modern DataGridColumnHeader">
            <Setter Property="Background" Value="{DynamicResource ThemeTableAlternating}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextPrimary}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="BorderThickness" Value="0,0,1,1"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
        </Style>

        <!-- ç¬¬ä¸€ä¸ªè¡¨å¤´çš„åœ†è§’ -->
        <Style Selector="DataGrid.modern DataGridColumnHeader:nth-child(1)">
            <Setter Property="CornerRadius" Value="12,0,0,0"/>
        </Style>

        <!-- æœ€åŽä¸€ä¸ªè¡¨å¤´çš„åœ†è§’ -->
        <Style Selector="DataGrid.modern DataGridColumnHeader:last-child">
            <Setter Property="CornerRadius" Value="0,12,0,0"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
        </Style>

        <!-- DataGrid Rowæ ·å¼ -->
        <Style Selector="DataGrid.modern DataGridRow">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="MinHeight" Value="48"/>
        </Style>

        <!-- DataGrid äº¤æ›¿è¡ŒèƒŒæ™¯ - ç®€åŒ–å®žçŽ° -->
        <Style Selector="DataGrid.modern DataGridRow:nth-child(even)">
            <Setter Property="Background" Value="{DynamicResource ThemeTableAlternating}"/>
        </Style>

        <!-- DataGrid æ‚¬åœæ•ˆæžœ -->
        <Style Selector="DataGrid.modern DataGridRow:pointerover">
            <Setter Property="Background" Value="{DynamicResource ThemeTableHover}"/>
        </Style>

        <!-- DataGrid é€‰ä¸­æ•ˆæžœ -->
        <Style Selector="DataGrid.modern DataGridRow:selected">
            <Setter Property="Background" Value="{DynamicResource ThemeTableSelected}"/>
        </Style>

        <!-- DataGrid é€‰ä¸­ä¸”æ‚¬åœ -->
        <Style Selector="DataGrid.modern DataGridRow:selected:pointerover">
            <Setter Property="Background" Value="{DynamicResource ThemeTableSelected}"/>
        </Style>

        <!-- DataGrid Cellæ ·å¼ -->
        <Style Selector="DataGrid.modern DataGridCell">
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <!-- ä¿¡æ¯å›¾æ ‡æ ·å¼ - æ›´ç‚«é…·çš„é¢œè‰² -->
        <Style Selector="Border.info-icon">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="#4FACFE" Offset="0"/>
                        <GradientStop Color="#00F2FE" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="CornerRadius" Value="18"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#404FACFE" OffsetX="0" OffsetY="2" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Border.warning-icon">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="#FFB347" Offset="0"/>
                        <GradientStop Color="#FFCC02" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="CornerRadius" Value="18"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#40FFB347" OffsetX="0" OffsetY="2" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Border.success-icon">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="#56FFA4" Offset="0"/>
                        <GradientStop Color="#59BC86" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="CornerRadius" Value="18"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#4056FFA4" OffsetX="0" OffsetY="2" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Border.danger-icon">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="#FF6B6B" Offset="0"/>
                        <GradientStop Color="#FF8E88" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="CornerRadius" Value="18"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#40FF6B6B" OffsetX="0" OffsetY="2" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- CheckBoxæ ·å¼ -->
        <Style Selector="CheckBox.modern">
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextPrimary}"/>
            <Setter Property="FontSize" Value="16"/>
        </Style>

        <!-- DatePickeræ ·å¼ -->
        <Style Selector="CalendarDatePicker.modern">
            <Setter Property="Background" Value="{DynamicResource ThemeCardBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeTextPrimary}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="FontSize" Value="16"/>
        </Style>
    </Window.Styles>

    <Grid Background="{DynamicResource ThemeBackground}" x:Name="MainGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- é¡¶éƒ¨æ ‡é¢˜æ å’Œä¸»é¢˜åˆ‡æ¢ - å¢žåŠ æ¸å˜èƒŒæ™¯ -->
        <Border Grid.Row="0" 
                BorderBrush="{DynamicResource ThemeBorder}" 
                BorderThickness="0,0,0,1"
                Padding="24,24"
                x:Name="HeaderBorder">
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                    <GradientStop Color="#FFFFFF" Offset="0"/>
                    <GradientStop Color="#F8F9FA" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Spacing="8">
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <TextBlock Classes="modern-title" Text="ðŸ "/>
                        <TextBlock Classes="modern-title" Text="æŠ¢æˆ¿å¥½å¥½å¥½"/>
                        <Border Classes="success-icon"
                                Width="32" Height="32"
                                VerticalAlignment="Center">
                            <TextBlock Text="âš¡"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="16"
                                       Foreground="White"/>
                        </Border>
                    </StackPanel>
                    <TextBlock Classes="modern-subtitle" Text="Avaloniaç‰ˆ Ver 1.0.6 By: hp - çŽ°ä»£åŒ–ç•Œé¢è®¾è®¡"/>
                </StackPanel>

                <Button Grid.Column="1" 
                        Classes="theme-toggle"
                        Content="ðŸŒ™"
                        ToolTip.Tip="åˆ‡æ¢ä¸»é¢˜"
                        Click="OnThemeToggleClick"
                        x:Name="ThemeToggleButton"/>
            </Grid>
        </Border>

        <!-- å¯æ»šåŠ¨çš„é…ç½®åŒºåŸŸ -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto" 
                      HorizontalScrollBarVisibility="Disabled"
                      Padding="24,20,24,0"
                      x:Name="ConfigScrollViewer">
            <StackPanel Spacing="0">

                <!-- è¿è¡Œæ¨¡å¼é…ç½® - å¯æŠ˜å  -->
                <Border Classes="collapsible-card">
                    <Grid RowDefinitions="Auto,Auto">
                        <Button Grid.Row="0" 
                                Classes="collapse-header"
                                Click="OnOperationModeToggle"
                                x:Name="OperationModeToggle">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <TextBlock Text="ðŸš€" FontSize="24" VerticalAlignment="Center"/>
                                <TextBlock Text="è¿è¡Œæ¨¡å¼é…ç½®" VerticalAlignment="Center"/>
                                <TextBlock Text="â–¼" 
                                           x:Name="OperationModeIcon"
                                           FontSize="14" 
                                           VerticalAlignment="Center" 
                                           Foreground="{DynamicResource ThemeTextSecondary}"/>
                            </StackPanel>
                        </Button>

                        <StackPanel Grid.Row="1" 
                                    x:Name="OperationModeContent"
                                    Spacing="20" 
                                    Margin="24,0,24,24">
                            <StackPanel Orientation="Horizontal" Spacing="24">
                                <StackPanel Spacing="8">
                                    <TextBlock Classes="modern-label" Text="è¿è¡Œæ¨¡å¼"/>
                                    <ComboBox Classes="modern"
                                              Width="240" 
                                              SelectedIndex="{Binding SelectedOperationMode}"
                                              ItemsSource="{Binding OperationModes}"
                                              ToolTip.Tip="æ¨¡æ‹Ÿç‚¹å‡»æ¨¡å¼å¯ä»¥çœ‹åˆ°å…·ä½“çš„æ“ä½œï¼Œåœ¨æœ€åŽä¸€æ­¥ç¡®è®¤éœ€è¦æ‰‹åŠ¨ç‚¹å‡»ï¼ŒæˆåŠŸçŽ‡è¾ƒé«˜ï¼Œä½†æ˜¯é€Ÿåº¦è¾ƒå‘åŒ…æ¨¡å¼æ…¢ï¼›å‘åŒ…æ¨¡å¼ç†è®ºé€Ÿåº¦æœ€å¿«ï¼Œä½†æ˜¯éœ€è¦cookieï¼Œå¹¶ä¸”ä¸ä¿è¯æˆåŠŸçŽ‡"/>
                                </StackPanel>

                                <StackPanel Spacing="8">
                                    <TextBlock Classes="modern-label" Text="æµè§ˆå™¨ç±»åž‹"/>
                                    <ComboBox Classes="modern"
                                              Width="180" 
                                              SelectedIndex="{Binding SelectedBrowserType}"
                                              ItemsSource="{Binding BrowserTypes}"
                                              IsEnabled="{Binding SelectedOperationMode, Converter={StaticResource IntToBoolConverter}}"/>
                                </StackPanel>

                                <Border Classes="info-icon"
                                        Width="40" Height="40" 
                                        VerticalAlignment="Bottom"
                                        Margin="12,0,0,0"
                                        ToolTip.Tip="æ¨¡æ‹Ÿç‚¹å‡»æ¨¡å¼å¯ä»¥çœ‹åˆ°å…·ä½“çš„æ“ä½œï¼Œåœ¨æœ€åŽä¸€æ­¥ç¡®è®¤éœ€è¦æ‰‹åŠ¨ç‚¹å‡»ï¼ŒæˆåŠŸçŽ‡è¾ƒé«˜ï¼Œä½†æ˜¯é€Ÿåº¦è¾ƒå‘åŒ…æ¨¡å¼æ…¢ï¼›å‘åŒ…æ¨¡å¼ç†è®ºé€Ÿåº¦æœ€å¿«ï¼Œä½†æ˜¯éœ€è¦cookieï¼Œå¹¶ä¸”ä¸ä¿è¯æˆåŠŸçŽ‡">
                                    <TextBlock Text="?"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"
                                               FontSize="20"
                                               Foreground="White"/>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- è´¦æˆ·ä¿¡æ¯é…ç½® - å¯æŠ˜å  -->
                <Border Classes="collapsible-card">
                    <Grid RowDefinitions="Auto,Auto">
                        <Button Grid.Row="0" 
                                Classes="collapse-header"
                                Click="OnAccountToggle"
                                x:Name="AccountToggle">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <TextBlock Text="ðŸ‘¤" FontSize="24" VerticalAlignment="Center"/>
                                <TextBlock Text="è´¦æˆ·ä¿¡æ¯é…ç½®" VerticalAlignment="Center"/>
                                <TextBlock Text="â–¶" 
                                           x:Name="AccountIcon"
                                           FontSize="14" 
                                           VerticalAlignment="Center" 
                                           Foreground="{DynamicResource ThemeTextSecondary}"/>
                            </StackPanel>
                        </Button>

                        <StackPanel Grid.Row="1" 
                                    x:Name="AccountContent"
                                    Spacing="20" 
                                    Margin="24,0,24,24"
                                    IsVisible="False">
                            <Grid RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="160,*,Auto">
                                <!-- ç”¨æˆ·è´¦å· -->
                                <TextBlock Grid.Row="0" Grid.Column="0" 
                                           Classes="modern-label"
                                           Text="ç”¨æˆ·è´¦å·"
                                           VerticalAlignment="Center"
                                           Margin="0,0,24,0"/>
                                <TextBox Grid.Row="0" Grid.Column="1" 
                                         Classes="modern"
                                         Text="{Binding UserAccount}"
                                         IsEnabled="{Binding SelectedOperationMode, Converter={StaticResource IntToBoolConverter}}"
                                         Watermark="è¯·è¾“å…¥ç”¨æˆ·è´¦å·"
                                         Margin="0,0,24,16"/>

                                <!-- ç”¨æˆ·å¯†ç  -->
                                <TextBlock Grid.Row="1" Grid.Column="0" 
                                           Classes="modern-label"
                                           Text="ç”¨æˆ·å¯†ç "
                                           VerticalAlignment="Center"
                                           Margin="0,0,24,0"/>
                                <TextBox Grid.Row="1" Grid.Column="1" 
                                         Classes="modern"
                                         Text="{Binding UserPassword}"
                                         IsEnabled="{Binding SelectedOperationMode, Converter={StaticResource IntToBoolConverter}}"
                                         PasswordChar="â—"
                                         Watermark="è¯·è¾“å…¥ç”¨æˆ·å¯†ç "
                                         Margin="0,0,24,16"/>

                                <!-- Cookie -->
                                <TextBlock Grid.Row="2" Grid.Column="0" 
                                           Classes="modern-label"
                                           Text="Cookie"
                                           VerticalAlignment="Center"
                                           Margin="0,0,24,0"/>
                                <TextBox Grid.Row="2" Grid.Column="1" 
                                         Classes="modern"
                                         Text="{Binding Cookie}"
                                         Watermark="è¯·è¾“å…¥Cookie(Httpå‘åŒ…æ¨¡å¼å¿…å¡«)"
                                         Margin="0,0,24,16"/>
                                <Border Grid.Row="2" Grid.Column="2" 
                                        Classes="warning-icon"
                                        Width="36" Height="36" 
                                        VerticalAlignment="Center"
                                        ToolTip.Tip="å¦‚æžœå¡«å†™äº†cookieä¸ç”¨å¡«è´¦å·å¯†ç ï¼ŒèŽ·å–æ–¹å¼ï¼šç™»é™†ä¸€æ¬¡åŽåœ¨æµè§ˆå™¨è®¾ç½®é‡ŒcookieæŸ¥æ‰¾ent.qpgzf.cnçš„cookie">
                                    <TextBlock Text="?"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"
                                               FontSize="18"
                                               Foreground="White"/>
                                </Border>

                                <!-- ç”³è¯·äººå§“å -->
                                <TextBlock Grid.Row="3" Grid.Column="0" 
                                           Classes="modern-label"
                                           Text="ç”³è¯·äººå§“å"
                                           VerticalAlignment="Center"
                                           Margin="0,0,24,0"/>
                                <TextBox Grid.Row="3" Grid.Column="1" 
                                         Classes="modern"
                                         Text="{Binding ApplierName}"
                                         Watermark="è¯·è¾“å…¥ç”³è¯·äººå§“å"/>
                            </Grid>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- æ‰§è¡Œå‚æ•°é…ç½® - å¯æŠ˜å  -->
                <Border Classes="collapsible-card">
                    <Grid RowDefinitions="Auto,Auto">
                        <Button Grid.Row="0" 
                                Classes="collapse-header"
                                Click="OnExecutionToggle"
                                x:Name="ExecutionToggle">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <TextBlock Text="â°" FontSize="24" VerticalAlignment="Center"/>
                                <TextBlock Text="æ‰§è¡Œå‚æ•°é…ç½®" VerticalAlignment="Center"/>
                                <TextBlock Text="â–¶" 
                                           x:Name="ExecutionIcon"
                                           FontSize="14" 
                                           VerticalAlignment="Center" 
                                           Foreground="{DynamicResource ThemeTextSecondary}"/>
                            </StackPanel>
                        </Button>

                        <StackPanel Grid.Row="1" 
                                    x:Name="ExecutionContent"
                                    Spacing="20" 
                                    Margin="24,0,24,24"
                                    IsVisible="False">
                            <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="160,*">
                                <!-- å¼€å§‹æ—¶é—´ -->
                                <TextBlock Grid.Row="0" Grid.Column="0" 
                                           Classes="modern-label"
                                           Text="å¼€å§‹æ—¶é—´"
                                           VerticalAlignment="Center"
                                           Margin="0,0,24,0"/>
                                <StackPanel Grid.Row="0" Grid.Column="1" 
                                            Orientation="Horizontal" 
                                            Spacing="16"
                                            Margin="0,0,0,16">
                                    <CalendarDatePicker Classes="modern" SelectedDate="{Binding StartDate}" Width="180"/>
                                    <TextBox Classes="modern" Text="{Binding StartHour}" Width="70" Watermark="æ—¶"/>
                                    <TextBlock Text=":" VerticalAlignment="Center" FontWeight="Bold" FontSize="20" Foreground="{DynamicResource ThemeTextPrimary}"/>
                                    <TextBox Classes="modern" Text="{Binding StartMinute}" Width="70" Watermark="åˆ†"/>
                                    <TextBlock Text=":" VerticalAlignment="Center" FontWeight="Bold" FontSize="20" Foreground="{DynamicResource ThemeTextPrimary}"/>
                                    <TextBox Classes="modern" Text="{Binding StartSecond}" Width="70" Watermark="ç§’"/>
                                </StackPanel>

                                <!-- è§¦å‘é—´éš” -->
                                <TextBlock Grid.Row="1" Grid.Column="0" 
                                           Classes="modern-label"
                                           Text="è§¦å‘é—´éš”(ms)"
                                           VerticalAlignment="Center"
                                           Margin="0,0,24,0"/>
                                <TextBox Grid.Row="1" Grid.Column="1" 
                                         Classes="modern"
                                         Text="{Binding ClickInterval}" 
                                         Width="160"
                                         HorizontalAlignment="Left"
                                         Margin="0,0,0,16"/>

                                <!-- è‡ªåŠ¨ç¡®è®¤ -->
                                <TextBlock Grid.Row="2" Grid.Column="0" 
                                           Classes="modern-label"
                                           Text="è‡ªåŠ¨ç¡®å®šæœ€åŽä¸€æ­¥"
                                           VerticalAlignment="Center"
                                           Margin="0,0,24,0"/>
                                <StackPanel Grid.Row="2" Grid.Column="1" 
                                            Orientation="Horizontal" 
                                            Spacing="20">
                                    <CheckBox Classes="modern"
                                              IsChecked="{Binding AutoConfirm}"
                                              IsEnabled="{Binding SelectedOperationMode, Converter={StaticResource IntToBoolConverter}}"
                                              VerticalAlignment="Center"/>
                                    <Border Classes="danger-icon"
                                            Width="36" Height="36" 
                                            VerticalAlignment="Center"
                                            ToolTip.Tip="æ…Žé‡é€‰æ‹©ï¼å¦‚æžœé€‰ä¸­ï¼Œç¨‹åºä¼šè‡ªåŠ¨ç‚¹å‡»æœ€åŽä¸€æ­¥æŠ¢æˆ¿ï¼Œå¦‚æžœä¸é€‰ä¸­ï¼Œç¨‹åºä¼šåœåœ¨æœ€åŽä¸€æ­¥ï¼Œéœ€è¦æ‰‹åŠ¨ç‚¹å‡»ç¡®è®¤">
                                        <TextBlock Text="!"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   FontSize="20"
                                                   Foreground="White"/>
                                    </Border>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- ç¤¾åŒºæ¡ä»¶è®¾ç½® - å¯æŠ˜å  -->
                <Border Classes="collapsible-card">
                    <Grid RowDefinitions="Auto,Auto">
                        <Button Grid.Row="0" 
                                Classes="collapse-header"
                                Click="OnCommunityToggle"
                                x:Name="CommunityToggle">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <TextBlock Text="ðŸ˜ï¸" FontSize="24" VerticalAlignment="Center"/>
                                <TextBlock Text="ç¤¾åŒºæ¡ä»¶è®¾ç½®" VerticalAlignment="Center"/>
                                <Border Classes="success-icon"
                                        Width="32" Height="32" 
                                        VerticalAlignment="Center"
                                        Margin="12,0,0,0"
                                        ToolTip.Tip="å°åŒºä¸ºå¿…å¡«ï¼Œå±‚æ•°å¯ä»¥èŒƒå›´é€‰æ‹©ï¼Œä¾‹å¦‚2-4,6(æ³¨æ„è¦è‹±æ–‡é€—å·)ï¼Œå±‚æ•°ä¸å¡«å³ä¸ç­›é€‰ï¼Œå…¶ä»–å¦‚æžœå¡«0åˆ™é»˜è®¤ä¸ºä¸ç­›é€‰">
                                    <TextBlock Text="?"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"
                                               FontSize="16"
                                               Foreground="White"/>
                                </Border>
                                <TextBlock Text="â–¶" 
                                           x:Name="CommunityIcon"
                                           FontSize="14" 
                                           VerticalAlignment="Center" 
                                           Foreground="{DynamicResource ThemeTextSecondary}"/>
                            </StackPanel>
                        </Button>

                        <StackPanel Grid.Row="1" 
                                    x:Name="CommunityContent"
                                    Spacing="20" 
                                    Margin="24,0,24,24"
                                    IsVisible="False">
                            <Button Classes="modern-primary" 
                                    Content="âž• æ·»åŠ æ¡ä»¶" 
                                    Command="{Binding AddCommunityCommand}" 
                                    HorizontalAlignment="Left"/>

                            <!-- ç¤¾åŒºæ¡ä»¶DataGrid -->
                            <Border Background="{DynamicResource ThemeCardBackground}" 
                                    BorderBrush="{DynamicResource ThemeBorder}" 
                                    BorderThickness="2" 
                                    CornerRadius="12" 
                                    Padding="0"
                                    MinHeight="200"
                                    ClipToBounds="True">
                                <DataGrid Classes="modern"
                                          ItemsSource="{Binding CommunityConditions}"
                                          CanUserReorderColumns="False"
                                          CanUserResizeColumns="True"
                                          CanUserSortColumns="True"
                                          GridLinesVisibility="None"
                                          HeadersVisibility="Column"
                                          MinHeight="180"
                                          MaxHeight="300"
                                          Background="Transparent"
                                          BorderThickness="0"
                                          CornerRadius="12">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="å°åŒºåç§°" Binding="{Binding CommunityName}" Width="*" MinWidth="120"/>
                                        <DataGridTextColumn Header="å¹¢å·" Binding="{Binding BuildingNo}" Width="80"/>
                                        <DataGridTextColumn Header="å±‚æ•°èŒƒå›´" Binding="{Binding FloorRange}" Width="100"/>
                                        <DataGridTextColumn Header="æœ€é«˜ä»·æ ¼(å…ƒ/æœˆ)" Binding="{Binding MaxPrice}" Width="120"/>
                                        <DataGridTextColumn Header="æœ€å°é¢ç§¯(mÂ²)" Binding="{Binding LeastArea}" Width="120"/>
                                        <DataGridTextColumn Header="æˆ¿å±‹ç±»åž‹" Binding="{Binding HouseTypeDescription}" Width="100"/>
                                        <DataGridTemplateColumn Header="æ“ä½œ" Width="80">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Button Classes="modern-danger" 
                                                            Content="åˆ é™¤" 
                                                            Command="{Binding $parent[Window].DataContext.DeleteCommunityCommand}"
                                                            CommandParameter="{Binding}"/>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- å›ºå®šçš„æ—¥å¿—è¾“å‡ºåŒºåŸŸ - å¯åŠ¨æ€è°ƒæ•´é«˜åº¦å’Œè·³å‡º -->
        <Border Grid.Row="2" 
                Classes="modern-card"
                Margin="24,20,24,0"
                x:Name="LogArea"
                Height="120">
            <StackPanel Spacing="16">
                <StackPanel Orientation="Horizontal" Spacing="16">
                    <TextBlock Text="ðŸ“‹" FontSize="24" VerticalAlignment="Center"/>
                    <TextBlock Classes="modern-title" Text="æ—¥å¿—è¾“å‡º" FontSize="22"/>
                    <Border Classes="success-icon"
                            Width="28" Height="28"
                            VerticalAlignment="Center">
                        <TextBlock Text="ðŸ“Š"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   FontSize="14"
                                   Foreground="White"/>
                    </Border>
                    <TextBlock Classes="modern-subtitle" 
                               Text="ðŸ’¤ å‡†å¤‡å°±ç»ª"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold"
                               x:Name="LogStatusText"/>
                </StackPanel>
                <ScrollViewer VerticalScrollBarVisibility="Auto" 
                              HorizontalScrollBarVisibility="Disabled">
                    <TextBox Classes="modern-log"
                             Text="{Binding LogText}"
                             IsReadOnly="True"
                             AcceptsReturn="True"
                             TextWrapping="Wrap"
                             x:Name="LogTextBox"
                             Height="40"/>
                </ScrollViewer>
            </StackPanel>
        </Border>

        <!-- å›ºå®šçš„æ“ä½œæŒ‰é’®åŒºåŸŸ - æ›´åŠ é†’ç›®çš„è®¾è®¡ -->
        <Border Grid.Row="3" 
                BorderBrush="{DynamicResource ThemeBorder}" 
                BorderThickness="0,1,0,0"
                Padding="24,24"
                x:Name="FooterBorder">
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                    <GradientStop Color="#FFFFFF" Offset="0"/>
                    <GradientStop Color="#F8F9FA" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="32">
                <Button Classes="modern-primary" 
                        Content="ðŸš€ å¼€å§‹æŠ¢æˆ¿" 
                        Command="{Binding StartProcessCommand}"
                        IsEnabled="{Binding !IsRunning}"
                        MinWidth="180"
                        FontSize="18"/>
                
                <Button Classes="modern-secondary" 
                        Content="â¹ï¸ åœæ­¢æŠ¢æˆ¿" 
                        Command="{Binding StopProcessCommand}"
                        IsEnabled="{Binding IsRunning}"
                        MinWidth="180"
                        FontSize="18"/>
                
                <Button Classes="modern-secondary" 
                        Content="ðŸ“– GitHub" 
                        Command="{Binding OpenGitHubCommand}"
                        MinWidth="160"
                        FontSize="16"/>
            </StackPanel>
        </Border>

    </Grid>

</Window>
